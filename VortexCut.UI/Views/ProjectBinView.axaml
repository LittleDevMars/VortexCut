<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:VortexCut.UI.ViewModels"
             xmlns:converters="clr-namespace:VortexCut.UI.Converters"
             mc:Ignorable="d" d:DesignWidth="300" d:DesignHeight="450"
             x:Class="VortexCut.UI.Views.ProjectBinView"
             x:DataType="vm:ProjectBinViewModel">

    <Grid>
        <!-- Media List -->
        <ListBox x:Name="MediaListBox"
                 ItemsSource="{Binding MediaItems}"
                 SelectedItem="{Binding SelectedItem}"
                 Background="{StaticResource BgPanelBrush}"
                 BorderThickness="0">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Padding="5" Margin="0,1" CornerRadius="2" Background="Transparent">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <!-- Thumbnail -->
                            <Border Width="80" Height="45" Background="{StaticResource BgHeaderBrush}" CornerRadius="2" ClipToBounds="True">
                                <Panel>
                                    <!-- ì¸ë„¤ì¼ ì´ë¯¸ì§€ (ThumbnailPathê°€ ìˆìœ¼ë©´ í‘œì‹œ) -->
                                    <Image Source="{Binding ThumbnailPath, Converter={x:Static converters:FilePathToBitmapConverter.Instance}}"
                                           Stretch="UniformToFill"
                                           IsVisible="{Binding ThumbnailPath, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                                    <!-- í”Œë ˆì´ìŠ¤í™€ë” (ì¸ë„¤ì¼ì´ ì—†ìœ¼ë©´ í‘œì‹œ) -->
                                    <TextBlock Text="ğŸ“¹"
                                               FontSize="20"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               IsVisible="{Binding ThumbnailPath, Converter={x:Static StringConverters.IsNullOrEmpty}}"/>
                                </Panel>
                            </Border>

                            <!-- Info -->
                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="{Binding Name}"
                                           Foreground="{StaticResource TextBrightBrush}"
                                           FontWeight="SemiBold"/>
                                <TextBlock Text="{Binding FilePath}"
                                           Foreground="{StaticResource TextSecondaryBrush}"
                                           FontSize="11"
                                           TextTrimming="CharacterEllipsis"
                                           MaxWidth="180"/>
                                <TextBlock Foreground="{StaticResource TextDisabledBrush}" FontSize="10">
                                    <Run Text="{Binding Width}"/>x<Run Text="{Binding Height}"/>
                                    <Run Text=" "/>
                                    <Run Text="{Binding DurationMs}"/>ms
                                </TextBlock>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <!-- Empty State (MediaItemsê°€ ë¹„ì–´ìˆê³  ë¡œë”© ì¤‘ì´ ì•„ë‹ ë•Œ) -->
        <Border x:Name="EmptyState"
                Background="{StaticResource BgPanelBrush}"
                IsVisible="{Binding IsEmpty}">
            <StackPanel HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Spacing="16">
                <!-- Icon -->
                <Border Width="80" Height="80"
                        Background="{StaticResource BgHeaderBrush}"
                        CornerRadius="40"
                        HorizontalAlignment="Center">
                    <TextBlock Text="ğŸ“"
                               FontSize="40"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                </Border>

                <!-- Message -->
                <StackPanel Spacing="8" HorizontalAlignment="Center">
                    <TextBlock Text="No Media Files"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextBrightBrush}"
                               HorizontalAlignment="Center"/>
                    <TextBlock FontSize="12"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               HorizontalAlignment="Center"
                               TextAlignment="Center">
                        <Run Text="ì—¬ê¸°ë¡œ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜"/>
                        <LineBreak/>
                        <Run Text="Ctrl+I" FontWeight="Bold" Foreground="{StaticResource AccentBrush}"/>
                        <Run Text="ë¥¼ ëˆŒëŸ¬ ë¯¸ë””ì–´ë¥¼ ê°€ì ¸ì˜¤ì„¸ìš”"/>
                    </TextBlock>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Loading State (ë¯¸ë””ì–´ ì„í¬íŠ¸ ì¤‘, ì•„ì§ ë¯¸ë””ì–´ê°€ í•˜ë‚˜ë„ ì—†ì„ ë•Œë§Œ ì „ì²´ ì˜¤ë²„ë ˆì´) -->
        <Border x:Name="LoadingState"
                Background="{StaticResource BgPanelBrush}"
                IsVisible="{Binding ShowLoadingOverlay}">
            <StackPanel Spacing="12" Margin="12">
                <!-- Skeleton Item 1 -->
                <Border Padding="5" CornerRadius="2" Background="Transparent">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <Border Width="80" Height="45" Background="{StaticResource BgHeaderBrush}" CornerRadius="2">
                            <TextBlock Text="â³"
                                       FontSize="20"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       Foreground="{StaticResource TextDisabledBrush}"/>
                        </Border>
                        <StackPanel VerticalAlignment="Center" Spacing="4">
                            <Border Width="150" Height="12" Background="{StaticResource BgHeaderBrush}" CornerRadius="2"/>
                            <Border Width="120" Height="10" Background="{StaticResource BgBaseBrush}" CornerRadius="2"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Skeleton Item 2 -->
                <Border Padding="5" CornerRadius="2" Background="Transparent" Opacity="0.7">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <Border Width="80" Height="45" Background="{StaticResource BgHeaderBrush}" CornerRadius="2"/>
                        <StackPanel VerticalAlignment="Center" Spacing="4">
                            <Border Width="140" Height="12" Background="{StaticResource BgHeaderBrush}" CornerRadius="2"/>
                            <Border Width="100" Height="10" Background="{StaticResource BgBaseBrush}" CornerRadius="2"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Loading Text -->
                <TextBlock Text="Importing media..."
                           FontSize="12"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           HorizontalAlignment="Center"
                           Margin="0,12,0,0"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
